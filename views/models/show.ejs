<%- include('../partials/page_header', { title: "MODEL DETAILS"}) -%>

<div class="flex gap-4 mb-8">
    <a href="/admin/events?model=<%= model.id %>" class="button purple">Events</a>
</div>

<div class="flex flex-col gap-8 justify-start w-full">

    <div class="flex flex-col gap-1">
        <div class="uppercase text-xs">
            Model ID
        </div>
        <div>
            <code><%= model.id %></code>
        </div>
    </div>

    <div class="flex flex-col gap-1">
        <div class="uppercase text-xs">
            Model
        </div>
        <div>
            <%= model.service %>/<%= model.model %>
        </div>
    </div>


    <div class="flex flex-col gap-1">
        <div class="uppercase text-xs">
            Options
        </div>
        <div class="overflow-y-scroll">
            <code>
                <pre><%= locals.Envtools.fromJSON(model.options) || "-" %></pre>
            </code>
        </div>
    </div>

    <div class="flex flex-col gap-1">
        <div class="uppercase text-xs">
            API Keys
        </div>
        <div class="flex flex-col gap-2">
            <div class="overflow-y-scroll">
                <code>
                    <% for (const apikey of model.apikeys) { %>
                    <a href="/admin/apikeys/<%= apikey.id %>/"><%= apikey.id %></a>
                    <% } %>
                </code>
            </div>

            <form hx-post="/admin/apikeys/add" action="/admin/apikeys/add" method="POST">
                <input type="text" name="ModelId" value="<%= model.id %>" hidden>
                <button type="submit" class="button">Generate API Key</button>
            </form>
        </div>
    </div>



    <hr />

    <div class="flex gap-4">
        <a href="/admin/models/<%= model.id %>/edit" class="button">Edit</a>
        <form hx-post="/admin/models/<%= model.id %>/remove" action="/admin/models/<%= model.id %>/remove" method="POST">
            <button type="submit" class="button red" onclick="return confirm('Are you sure you want to delete this model?')">Delete</button>
        </form>
    </div>
</div>

<%- include('../partials/page_footer') -%>