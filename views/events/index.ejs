<%- include('../partials/page_header', { title: "Events"}) -%>

<div class="w-full flex flex-col gap-8">
    <div class="">
        <table class="w-full">
            <tr>
                <th class="text-left p-2">Endpoint</th>
                <th class="text-left p-2">Service</th>
                <th class="text-left p-2">Model</th>
                <th class="text-left p-2">Options</th>
                <th class="text-left p-2">Secrets</th>
                <th class="text-left p-2">Actions</th>
            </tr>
            <% for (let event of events) { -%>
            <tr>
                <td class="p-2"><%= event.id.split("-")[0] %></td>
                <td class="p-2"><%= event.response_data %></td>
                <td class="p-2"><%# model.model %></td>
                <td class="p-2"><%# locals.Envtools.fromJSON(model.options) %></td>
                <td class="p-2"><%# Object.keys(model.secrets).join(", ") %></td>
                <td class="p-2">
                    <a href="/admin/history/<%# model.id %>" class="button">Logs</a>
                    <a href="/admin/models/<%# model.id %>" class="button purple">Show</a>
                </td>
            </tr>
            <% } %>
            <% if (events.length === 0) { %>
            <tr>
                <td colspan="6" class="p-2 text-center">No events found</td>
            </tr>
            <% } %>
        </table>
    </div>
</div>

<%- include('../partials/page_footer') -%>